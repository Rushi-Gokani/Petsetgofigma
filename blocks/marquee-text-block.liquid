{% comment %}
  Marquee Text Block for Product Information Section
{% endcomment %}

<div class="marquee-block" style="margin-top: {{ block.settings.margin_top }}px; margin-bottom: {{ block.settings.margin_bottom }}px;">
  <div class="marquee-container" style="background-color: rgb(255 122 0 / 0.1);{% if block.settings.text_color != blank %}color: {{ block.settings.text_color }};{% endif %} padding: {{ block.settings.padding_vertical }}px 0; {% if block.settings.border_top %}border-top: 1px solid {{ block.settings.border_color }};{% endif %}{% if block.settings.border_bottom %}border-bottom: 1px solid {{ block.settings.border_color }};{% endif %}">
    <div class="marquee-content" style="animation-duration: {{ block.settings.animation_speed }}s;">
      {% liquid
        assign processed_text = block.settings.marquee_text
        if block.settings.enable_icon
          assign icon_style = 'width: ' | append: block.settings.icon_size | append: 'px; height: ' | append: block.settings.icon_size | append: 'px; margin-right: ' | append: block.settings.icon_spacing | append: 'px; margin-left: ' | append: block.settings.icon_spacing | append: 'px; display: inline-block; vertical-align: middle;'
          if block.settings.text_color != blank
            assign icon_style = icon_style | append: ' color: ' | append: block.settings.text_color | append: ';'
          endif

          assign processed_text = processed_text | replace: '[star]', '<span style="' | append: icon_style | append: '"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg></span>'
          assign processed_text = processed_text | replace: '[heart]', '<span style="' | append: icon_style | append: '"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/></svg></span>'
          assign processed_text = processed_text | replace: '[gift]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/></svg></span>'
          assign processed_text = processed_text | replace: '[tag]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/></svg></span>'
          assign processed_text = processed_text | replace: '[lightning]', '<span style="' | append: icon_style | append: '"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/></svg></span>'
          assign processed_text = processed_text | replace: '[fire]', '<span style="' | append: icon_style | append: '"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"/></svg></span>'
          assign processed_text = processed_text | replace: '[diamond]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></span>'
          assign processed_text = processed_text | replace: '[trophy]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M6.5 18a2.5 2.5 0 01-5 0V8.5a2.5 2.5 0 015 0V18zM22.5 18a2.5 2.5 0 01-5 0V8.5a2.5 2.5 0 015 0V18zM12 15V5m0 0l3 3m-3-3l-3 3"/></svg></span>'
          assign processed_text = processed_text | replace: '[truck]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 104 0m6 0a2 2 0 104 0m-4 0a2 2 0 104 0"/></svg></span>'
          assign processed_text = processed_text | replace: '[check]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></span>'
          assign processed_text = processed_text | replace: '[bell]', '<span style="' | append: icon_style | append: '"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg></span>'
        endif
      %}
      {% assign repetitions = 10 %}

      {% for i in (1..repetitions) %}
        <div class="marquee-item" style="padding-right: {{ block.settings.text_spacing }}px; font-size: {{ block.settings.font_size }}px; font-weight: {{ block.settings.font_weight }}; text-transform: {{ block.settings.text_transform }}; letter-spacing: {{ block.settings.letter_spacing }}px;">
          {% if block.settings.enable_links and block.settings.link_url != blank %}
            <a href="{{ block.settings.link_url }}" class="marquee-link" style="{% if block.settings.text_color != blank %}color: {{ block.settings.text_color }};{% endif %} text-decoration: none;">
              {{ processed_text | replace: '&lt;', '<' | replace: '&gt;', '>' | replace: '&quot;', '"' | replace: '&#39;', "'" }}
            </a>
          {% else %}
            <span>{{ processed_text | replace: '&lt;', '<' | replace: '&gt;', '>' | replace: '&quot;', '"' | replace: '&#39;', "'" }}</span>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .marquee-block {
    overflow: hidden;
    width: 100%;
  }

  .marquee-container {
    position: relative;
    overflow: hidden;
    width: 100%;
  }

  .marquee-content {
    display: flex;
    animation: marquee linear infinite;
    white-space: nowrap;
  }

  .marquee-item {
    display: inline-flex;
    align-items: center;
    line-height: 1.2;
  }

  .marquee-link {
    transition: opacity 0.3s ease;
  }

  .marquee-link:hover {
    opacity: 0.8;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  @media (max-width: 749px) {
    .marquee-item {
      font-size: {{ block.settings.mobile_font_size }}px !important;
    }
  }

  /* Pause animation on hover */
  .marquee-container:hover .marquee-content {
    animation-play-state: paused;
  }
</style>

{% schema %}
{
  "name": "Marquee Text",
  "type": "marquee_block",
  "settings": [
    {
      "type": "header",
      "content": "Text Content"
    },
    {
      "type": "text",
      "id": "marquee_text",
      "label": "Marquee Text",
      "default": "FREE SHIPPING ON ORDERS OVER $50 • NEW ARRIVALS DAILY • LIMITED TIME OFFER",
      "info": "This text will repeat across the marquee"
    },
    {
      "type": "header",
      "content": "Animation Settings"
    },
    {
      "type": "range",
      "id": "animation_speed",
      "label": "Animation Speed",
      "min": 5,
      "max": 60,
      "step": 1,
      "unit": "sec",
      "default": 20,
      "info": "Higher values = slower animation"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font Size (Desktop)",
      "min": 12,
      "max": 72,
      "step": 1,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "mobile_font_size",
      "label": "Font Size (Mobile)",
      "min": 12,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 18
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "Font Weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semibold"
        },
        {
          "value": "700",
          "label": "Bold"
        },
        {
          "value": "900",
          "label": "Black"
        }
      ],
      "default": "600"
    },
    {
      "type": "select",
      "id": "text_transform",
      "label": "Text Transform",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "uppercase",
          "label": "Uppercase"
        },
        {
          "value": "lowercase",
          "label": "Lowercase"
        },
        {
          "value": "capitalize",
          "label": "Capitalize"
        }
      ],
      "default": "uppercase"
    },
    {
      "type": "range",
      "id": "letter_spacing",
      "label": "Letter Spacing",
      "min": -2,
      "max": 10,
      "step": 0.5,
      "unit": "px",
      "default": 2
    },
    {
      "type": "range",
      "id": "text_spacing",
      "label": "Text Spacing Between Items",
      "min": 20,
      "max": 200,
      "step": 5,
      "unit": "px",
      "default": 60
    },
    {
      "type": "header",
      "content": "Colors & Background"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "rgb(255 122 0 / 0.1)"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Spacing & Borders"
    },
    {
      "type": "range",
      "id": "padding_vertical",
      "label": "Padding Vertical",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margin Top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Margin Bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "checkbox",
      "id": "border_top",
      "label": "Show Top Border",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "border_bottom",
      "label": "Show Bottom Border",
      "default": false
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Link Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_links",
      "label": "Make Text Clickable",
      "default": false
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL",
      "info": "URL to navigate to when marquee text is clicked"
    },
    {
      "type": "header",
      "content": "Icon Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_icon",
      "label": "Enable icon placeholders (e.g., [star])",
      "default": true,
      "info": "Available: star, heart, gift, tag, lightning, fire, diamond, trophy, truck, check, bell"
    },
    {
      "type": "range",
      "id": "icon_size",
      "label": "Icon Size",
      "min": 10,
      "max": 64,
      "step": 1,
      "unit": "px",
      "default": 18
    },
    {
      "type": "range",
      "id": "icon_spacing",
      "label": "Icon Side Spacing",
      "min": 0,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 6
    }
  ]
}
{% endschema %}