{% assign classes = class | default: '' %}

{% if right %}
  {% assign classes = classes | append: ' resizable--right' %}
{% else %}
  {% assign classes = classes | append: ' resizable--left' %}
{% endif %}

<div
  class="resizable {{ classes }}"
  x-data="{ isTransitioning: false }"
  style="--initial-width: {{ initialWidth }}; --initial-height: {{ initialHeight }}; --target-width: {{ initialWidth }}; --target-height: {{ initialHeight }}"
  :style="
    {
      '--initial-width': {{ initialWidth }}, // Do not add 'px' here
      '--initial-height': {{ initialHeight }}, // Do not add 'px' here
      '--target-width': `${$store.resizable._current['{{id}}']?.width || {{ initialWidth }}}`, // Do not add 'px' here
      '--target-height': `${$store.resizable._current['{{id}}']?.height || {{ initialHeight }}}`, // Do not add 'px' here
    }
  "
  :class="
    {
      'resizable--visible': $store.resizable._current['{{id}}'],
      'resizable--transitioning': isTransitioning,
    }
  "
  x-init="$store.resizable._register({id: '{{ id }}'})"
>
  <div
    class="resizable__wrapper"
    x-a11y-trap="$store.resizable._current['{{id}}']"
  >
    <div class="resizable__side resizable__side--l"></div>
    <div class="resizable__corner resizable__corner--tl"></div>
    <div class="resizable__side resizable__side--t"></div>
    <div class="resizable__corner resizable__corner--tr"></div>
    <div class="resizable__side resizable__side--r"></div>
    <div class="resizable__corner resizable__corner--br"></div>
    <div class="resizable__side resizable__side--b"></div>
    <div class="resizable__corner resizable__corner--bl"></div>
    <div
      class="resizable__bg"
      @click="$store.resizable.hide('{{ id }}')"
      @transitionstart="isTransitioning = true"
      @transitionend="isTransitioning = false; {{ onTransitionEnd }}"
    ></div>
    <div
      @click="$store.resizable.show('{{ id }}');"
      id="{{ id }}-initial"
      class="resizable__content resizable__content--trigger"
    >
      {{ content }}
    </div>
    <div
      class="resizable__content resizable__content--portal overflow-y-hidden"
    >
      <div id="{{ id }}" class="resizable__scroll" :inert="!$store.resizable._current['{{id}}']"></div>
    </div>
    <div id="{{ id }}-fixed" class="resizable__fixed"></div>
  </div>
</div>
